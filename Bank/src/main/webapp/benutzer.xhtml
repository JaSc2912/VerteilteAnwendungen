<!DOCTYPE html>
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:p="http://primefaces.org/ui"
>
  <h:head>
    <title>Admin - Benutzerverwaltung</title>
  </h:head>
  <h:body>
    <h:form id="form">
      <p:panel header="Benutzerverwaltung">
        <p:dataTable
          var="benutzer"
          value="#{benutzerBean.alleBenutzer}"
          paginator="true"
          rows="10"
        >
          <p:column
            headerText="Benutzername"
            sortBy="#{benutzer.benutzername}"
            filterBy="#{benutzer.benutzername}"
          >
            <h:outputText value="#{benutzer.benutzername}" />
          </p:column>
          <p:column
            headerText="Name"
            sortBy="#{benutzer.name}"
            filterBy="#{benutzer.name}"
          >
            <h:outputText value="#{benutzer.name}" />
          </p:column>
          <p:column
            headerText="Rolle"
            sortBy="#{benutzer.rolle}"
            filterBy="#{benutzer.rolle}"
          >
            <h:outputText value="#{benutzer.rolle}" />
          </p:column>
          <p:column
            headerText="Aktionen"
            style="width: 100px; text-align: center"
          >
            <p:commandButton
              icon="pi pi-pencil"
              title="Bearbeiten"
              oncomplete="PF('userDialog').show()"
              update=":form:dialogContent"
            />
            <p:commandButton
              icon="pi pi-trash"
              title="Löschen"
              action="#{benutzerBean.loeschen(benutzer.benutzername)}"
              update="@form"
            />
          </p:column>
        </p:dataTable>
        <p:commandButton
          value="Neuen Benutzer anlegen"
          oncomplete="PF('userDialog').show()"
          style="margin-top: 10px"
        />
      </p:panel>

      <p:dialog header="Benutzerdetails" widgetVar="userDialog" modal="true">
        <h:panelGrid id="dialogContent" columns="2" cellpadding="5">
          <h:outputLabel for="username" value="Benutzername:" />
          <p:inputText
            id="username"
            value="#{benutzerBean.selectedBenutzer.benutzername}"
          />

          <h:outputLabel for="name" value="Name:" />
          <p:inputText
            id="name"
            value="#{benutzerBean.selectedBenutzer.name}"
          />

          <!-- Weitere Felder für Passwort, Rolle etc. -->

          <p:commandButton
            value="Speichern"
            action="#{benutzerBean.speichern}"
            update=":form:form"
            oncomplete="PF('userDialog').hide()"
          />
        </h:panelGrid>
      </p:dialog>
    </h:form>
    <h:link value="Zurück zum Menü" outcome="menu.xhtml" />
  </h:body>
</html>
